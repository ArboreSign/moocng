{% extends "courses/base_course.html" %}

{% load i18n %}

{% block nav-course-progress %}class="active"{% endblock %}

{% block mainclass %}courseprogress{% endblock %}

{% block content %}
<div class="row">
    <section class="span8">
        <div class="row"><div class="span8">
            <h2 id="unit-title"></h2>
        </div></div>
        <div class="row">
            <div class="span6" id="unit-progress-bar"></div>
            <div class="span2"><div class="well" id="unit-progress-text"></div></div>
        </div>
        <div class="row"><div class="span6">
            <ol id="unit-kqs"></ol>
        </div></div>
    </section>
    <div class="span4" id="unit-list">
        <ul class="nav nav-list">
            {% for unit in unit_list %}
            <li id="unit{{ unit.id }}"><a href="#unit{{ unit.id }}">{{ unit.title }}</a></li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}

{% block extrajs %}
    <script src="{{ STATIC_URL }}js/libs/underscore-1.3.3.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/libs/backbone-0.9.2.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/libs/async.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/models.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/ajax.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/progress-views.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/routes.js" type="text/javascript"></script>
    <script type="text/javascript">
        $("#unit-list li").each(function (idx, node) {
            var id = node.id.split("unit")[1];
            MOOC.models.course.add(new MOOC.models.Unit({
                order: idx,
                id: parseInt(id, 10),
                title: $(node).find("a").html()
            }));
        });
        MOOC.init();
    </script>
{% endblock %}
