{% extends "courses/base_course.html" %}

{% load i18n compress %}

{% block nav-course-classroom %}class="active"{% endblock %}

{% block mainclass %}classroom{% endblock %}

{% block content %}
<div class="row mb20">
    <section class="span8">
        <div class="row"><div class="span8">
            <h2 id="kq-title"></h2>
        </div></div>
        <div class="row"><div class="span8" id="kq-video"></div></div>
        <div class="row">
            <div class="span2">
                <button class="btn" id="kq-previous">{% trans "Previous" %}</button>
            </div>
            <div class="span4 hide" id="kq-q-buttons">
                <button class="btn" id="kq-q-showkq">{% trans "Show video" %}</button>
                <button class="btn" id="kq-q-submit">{% trans "Submit" %}</button>
            </div>
            <div class="span2 offset4" id="kq-next-container">
                <button class="btn pull-right" id="kq-next">{% trans "Next" %}</button>
            </div>
        </div>
        <div class="row alerts">
            <div class="span4 offset2">
                <div class="alert alert-block alert-error hide">
                    <h4 class="alert-heading">title</h4>
                    <p>message</p>
                </div>
                <div class="alert alert-block alert-success hide">
                    <h4 class="alert-heading">title</h4>
                    <p>message</p>
                </div>
                <div class="alert alert-block alert-info hide">
                    <h4 class="alert-heading">title</h4>
                    <p>message</p>
                </div>
            </div>
        </div>
    </section>
    <div class="span4" id="unit-selector">
        {% for unit in unit_list %}
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" href="#unit{{ unit.id }}" data-target="#unit{{ unit.id }}-container" data-parent="#unit-selector">{{ unit.title }}</a>
            </div>
            <div id="unit{{ unit.id }}-container" class="collapse accordion-body">
                <div class="accordion-inner"></div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="row">
    <section class="span12">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#comments" data-toggle="tab">{% trans "Instructor's comments" %}</a></li>
            <li><a href="#suplementary" data-toggle="tab">{% trans "Suplementary material" %}</a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="comments">
            </div>
            <div class="tab-pane" id="suplementary">
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block extrajs %}
    <script type="text/javascript">
        function onYouTubeIframeAPIReady() {
            "use strict";
            if (typeof MOOC === 'undefined') {
                window.MOOC = {};
            }
            MOOC.YTready = true;
        }
    </script>
    <script src="//www.youtube.com/iframe_api" type="text/javascript"></script>
    {% compress js %}
    <script src="{{ STATIC_URL }}js/libs/underscore-1.3.3.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/libs/backbone-0.9.2.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/libs/async.min.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/ajax.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/models.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/routes.js" type="text/javascript"></script>
    {% endcompress %}
    {% compress js %}
    <script src="{{ STATIC_URL }}js/classroom-views.js"> type="text/javascript"</script>
    <script type="text/javascript">
        MOOC.trans = {
            ajax: {
                error: "{% trans "Error" %}",
                unknownError: "{% trans "Unknown error with ajax petition" %}"
            },
            classroom: {
                q: "{% trans "Q" %}",
                a: "{% trans "A" %}",
                answersSent: "{% trans "Answers sent" %}",
                answersSentMsg: "{% trans "Your answers were successfully sent to the server." %}",
                answersCorrect: "{% trans "Congratulations, you got it right!" %}",
                answersIncorrect: "{% trans "Wrong answer, good luck next time" %}"
            },
        };
        $("#unit-selector div.collapse").each(function (idx, node) {
            var id = node.id.split("unit")[1];
            id = id.split("-")[0];
            MOOC.models.course.add(new MOOC.models.Unit({
                order: idx,
                id: parseInt(id, 10)
            }));
        });
        MOOC.init({{ course.id }}, true);
    </script>
    {% endcompress %}
{% endblock %}
